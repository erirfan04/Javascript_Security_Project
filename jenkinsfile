pipeline {
	agent any
 
	tools {
    	maven 'Maven'
    	jdk 'JDK17'
	}
 
	stages {
 
        stage('Checkout Code') {
            steps {
                git branch: 'main',
                    url: 'https://github.com/erirfan04/Javascript_Security_Project.git'
        	}
    	}
 
        stage('Build') {
            steps {
                sh 'npm install 
                    npm run build'
        	}
    	}
 
        stage('Test') {
            steps {
                sh 'mvn test'
        	}
    	}
 
        stage('Deploy to Azure') {
            steps {
                sh '''
                az webapp deploy \
                --resource-group MyRG \
                --name MyAzureApp \
                --src-path target/myapp.jar
                '''
        	}
    	}
	}
 
	post {
        success {
            echo "Deployment successful ğŸ‰"
    	}
        failure {
            echo "Pipeline failed âŒ"
    	}
	}
}
